<div *ngIf="isValid">
  <!-- Floating Chat Button -->
  <button class="chat-toggle" (click)="toggleChat()">ğŸ’¬</button>

  <!-- Chat Widget -->
  <div *ngIf="isChatOpen" class="chat-widget">
    <div class="chat-header">
      <div class="agent-info">
        <img src="https://i.ibb.co/9NbJMcv/mj-k.webp" alt="Agent Avatar" class="agent-avatar" />
        <h4>Maui Jim Assistant</h4>
    
      </div>
      <button class="close-btn" (click)="toggleChat()">âœ–</button>
    </div>

    <div #chatBody class="chat-body">
	   <div [ngClass]="'bot-msg'">
        <markdown [data]="wcMessage[0].content"></markdown>
     </div>
      <div *ngFor="let msg of messages">
        <div *ngIf="msg.role !== 'system'" [ngClass]="msg.role === 'assistant' ? 'bot-msg' : 'user-msg'">
          <markdown [data]="msg.content"></markdown>
        </div>
      </div>
    </div>

    <div class="chat-footer">
      <input
        [(ngModel)]="userInput"
        (keydown.enter)="sendMessage()"
        placeholder="Type your message..."
      />
      <button class="send-btn" (click)="sendMessage()">Send</button>
    </div>
  </div>
</div>
